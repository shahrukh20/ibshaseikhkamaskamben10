@model CustomerManagementSystem.BLL.ViewModels.ReportsViewModel.UnAssignedReportsViewModel

@{
    /**/
}


<form action="/Reports/RevenueBySourceType" id="leadconversionform" method="post">
    <div id="content">
        <div id="content">
            <h1>Revenue By Source Type Report</h1>
            <div class="box box-danger">
                <div class="box-header with-border">
                    <div class="form-horizontal">
                        <hr />
                        <div class="form-group">


                            <div class="col-md-2"><label>Date From</label></div>
                            <div class="col-md-4">
                                <input type="date" class="form-control" id="fromdate" name="fromdate" />
                            </div>


                            <div class=" col-md-2"><label>Date to</label></div>
                            <div class="col-md-4">
                                <input type="date" class="form-control" id="todate" name="todate" />
                            </div>

                        </div>




                        <div class="form-group">
                            <div class="col-md-offset-10 col-md-2">
                                <input type="button" onclick="Generate()" value="Generate" class="btn btn-primary btn-block btn-flat" />

                            </div>
                        </div>




                    </div>
                </div>
                <div class="box-header with-border">
                    <div class="">
                        <div id="chart"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- Load c3.css -->
<link href="~/Content/C3charts/c3-0.6.5/c3.css" rel="stylesheet" />
<!-- Load d3.js and c3.js -->
<script src="https://d3js.org//d3.v5.min.js" charset="utf-8"></script>
<script src="~/Content/C3charts/c3-0.6.5/c3.min.js"></script>

<script>

    //$(document).ready(function () {

    //    Generate();

    //})
    //var chart = c3.generate({
    //    data: {
    //        url: "../Reports/RevenueBy",
    //        type: 'line'
    //    }
    //});
    //var chart = c3.generate({
    //    data: {
    //        columns: function () {
    //            $.ajax({
    //                type: "POST",
    //                url: "../Reports/RevenueBy",
    //                dataType: "JSON",
    //                data: { str: str },
    //                async: false,
    //                success: function (data) {
    //                    return data;
    //                }
    //            })
    //        }
    //    }
    //});


    //$.ajax({
    //    url: "../Reports/RevenueBy",
    //    type: "post",

    //    success: function (response) {
    //        var newdat = JSON.parse(response);
    //        $("#divPDquant").text(newdat.PDquant[1]);
    //        chart.x(newdat.year);
    //        chart.load({
    //            columns: [newdat.PDquant]
    //        });
    //    }

    function Generate() {
        var chart = c3.generate({
            data: {
                json: {
                    //data1: [30, 20, 50, 40, 60, 50],
                    //data2: [200, 130, 90, 240, 130, 220],
                    //data3: [300, 200, 160, 400, 250, 250]
                }
            }
        });
        
        $.ajax({
            type: "POST",
            url: "../Reports/RevenueBy",
            data: { datefrom: $('#fromdate').val(), dateto: $('#todate').val() }, 
            dataType: "text",
            async: false,
            success: function (data1) {
                debugger;
                c3.generate({
                    data: {
                        json: {

                            Revenue: JSON.parse(data1)[0]
                        }
                    }
                });

                //chart.load({
                //    columns: [
                //       JSON.parse(data1),

                //    ]
                //});

            },
            error: function (data1) {
                c3.generate({
                    data: {
                        json: {

                        }
                    }
                });
            }
        })
    }</script>