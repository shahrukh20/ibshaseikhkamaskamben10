

<script src="~/js/libs/jquery-2.1.1.min.js"></script>
<script src="~/js/libs/jquery-ui-1.10.3.min.js"></script>

<link href="~/Content/jsgrid/jsgrid.min.css" rel="stylesheet" />
<link href="~/Content/jsgrid/jsgrid-theme.min.css" rel="stylesheet" />
<link href="~/css/font-awesome.min.css" rel="stylesheet" />
<script src="~/Content/jsgrid/jsgrid.min.js"></script>


<h2>Attaching Lead To Salesmen</h2>

<form id="LeadListingForm" action="/LeadPools/LeadListing" method="post">


    <div id="content">
        <div class="form-horizontal">
            <div id="jsGrid"></div>
        </div>
    </div>

</form>

<!-- END MAIN CONTENT -->

<script type="text/javascript">
    var MyDateField = function (config) {
        jsGrid.Field.call(this, config);
    };

    MyDateField.prototype = new jsGrid.Field({

        css: "date-field",            // redefine general property 'css'
        align: "center",              // redefine general property 'align'

        myCustomProperty: "foo",      // custom property

        sorter: function (date1, date2) {
            return new Date(date1) - new Date(date2);
        },

        itemTemplate: function (value) {

            return new Date(value).toDateString();
        },

        filterTemplate: function (value) {
            return this._insertPicker = $("<input>").datepicker({ defaultDate: new Date() });
        },

        insertTemplate: function (value) {
            if (this.editing)
                return this._insertPicker = $("<input>").datepicker({ defaultDate: new Date() });
        },

        editTemplate: function (value) {
            if (this.editing)
                return this._editPicker = $("<input>").datepicker().datepicker("setDate", new Date(value));
        },

        insertValue: function () {
            if (this.editing)
                return this._insertPicker.datepicker("getDate").toISOString();
        },

        editValue: function () {
            if (this.editing)
                return this._editPicker.datepicker("getDate").toISOString();

        }
    });

    jsGrid.fields.date = MyDateField;
    $("#jsGrid").jsGrid({
        width: "100%",
        height: "400px",
        sorting: true,
        paging: true,
        autoload: true,

        pageSize: 5,
        pageButtonCount: 5,
        controller: {

            loadData: function (filter) {
                return $.ajax({
                    type: "GET",
                    async: false,
                    url: "../LeadPools/LeadListingLoad",
                    dataType: "JSON"
                });
            }
        },
        fields: [
            { name: "Id", title: "Id", type: "text", visible: false, align: 'center' },
            { name: "LeadName", title: "Lead Name", type: "text", width: 50, validate: "required", align: 'center', editing: false },
            { name: "Date", title: "Date", type: "date", width: 50, align: 'center', editing: false },
            { name: "LeadRemarks", title: "Remarks", type: "text", width: 150, validate: "required", align: 'center', editing: false },
            {
                name: 'Update',
                align: 'center',
                itemTemplate: function (_, item) {
                    return "<a onclick ='ReditectToUpdateSection(" + item.Id + ")' name='Update'>Update</a>";
                }
            }
        ]

    });
</script>
<script>

    function ReditectToUpdateSection(id)
    {
        var base_url = window.location.origin;
        window.location = base_url + "/LeadPools/StatusUpdate?id=" + id;
    }
    $(function () {
        $(".datepicker").datepicker();
    });
</script>